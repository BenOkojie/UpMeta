import * as hz from 'horizon/core';

class BounceBlock extends hz.Component<typeof BounceBlock> {
  static propsDefinition = {
    bounceForce: { type: hz.PropTypes.Number, default: 10 },
  };

  start() {
    this.connectCodeBlockEvent(this.entity, hz.CodeBlockEvents.OnPlayerCollision, (player: hz.Player, collisionAt: hz.Vec3, normal: hz.Vec3, relativeVelocity: hz.Vec3) => {
      const bounceDirection = normal.clone().normalize();
      const bounceVelocity = bounceDirection.mul(this.props.bounceForce!);
      player.velocity.set(bounceVelocity);
    });
  }
}

hz.Component.register(BounceBlock);